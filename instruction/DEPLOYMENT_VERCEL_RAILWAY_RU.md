# Инструкция по развертыванию: Vercel + Railway

Эта инструкция поможет вам развернуть проект, используя **оптимальный стек**:

* **Frontend (Интерфейс):** React, развернутый на **Vercel**.
* **Backend (Сервер + База данных):** Node.js + PostgreSQL, развернутые на **Railway**.

---

## Часть 1: Frontend на Vercel

Vercel — это "родной дом" для React и Next.js. Он обеспечивает невероятно быструю доставку статики (CDN) по всему миру.

### 1. Подготовка кода (React)

Предполагается, что вы создали React приложение (например, через `npm create vite@latest`).

1. Убедитесь, что ваш код находится на **GitHub**.
2. В корне проекта должен быть файл `package.json` со скриптом `build`.

### 2. Деплой (Развертывание)

1. Зарегистрируйтесь на [Vercel](https://vercel.com/) (войдите через GitHub).
2. Нажмите кнопку **"Add New Project"**.
3. Выберите ваш репозиторий с Frontend-ом из списка.
4. **Framework Preset:** Vercel обычно сам определит (Vite, Next.js, Create React App). Если нет — выберите "Vite".
5. **Environment Variables:** (Здесь позже мы добавим адрес нашего Бэкенда).
6. Нажмите **"Deploy"**.

Готово! Через минуту ваш сайт будет доступен по адресу `https://ваш-проект.vercel.app`.

---

## Часть 2: Backend + Database на Railway

Railway — это современная платформа, которая позволяет поднять сервер и базу данных в пару кликов.

### 1. Подготовка кода (Node.js)

Предполагается, что у вас есть Node.js сервер (Express/NestJS) с файлом `package.json` и скриптом `start`.

### 2. Создание проекта в Railway

1. Зайдите на [Railway.app](https://railway.app/).
2. Нажмите **"New Project"**.
3. Выберите **"Provision PostgreSQL"**.
    * Railway создаст для вас базу данных.
    * Через секунду появится плитка "PostgreSQL".

### 3. Подключение Сервера (Node.js)

1. В том же проекте Railway нажмите **"New"** (или Ctrl+K) -> **"GitHub Repo"**.
2. Выберите ваш репозиторий с Backend-ом.
3. Railway начнет сборку.

### 4. Связь Сервера и Базы Данных

1. Нажмите на плитку **PostgreSQL** -> вкладка **Connect**.
2. Скопируйте `DATABASE_URL` (строка вида `postgresql://user:pass@host:port/db`).
3. Нажмите на плитку вашего **Node.js сервиса**.
4. Перейдите во вкладку **Variables**.
5. Нажмите **"New Variable"**.
    * NAME: `DATABASE_URL`
    * VALUE: (Вставьте скопированную строку).
6. Railway автоматически перезапустит ваш сервер с новой переменной.

Теперь ваш сервер знает, где находится база данных.

---

## Часть 3: Соединяем Frontend и Backend

Чтобы сайт (Vercel) мог общаться с сервером (Railway):

1. **В Railway:**
    * Зайдите в настройки Node.js сервиса -> вкладка **Settings**.
    * В разделе "Networking" нажмите **"Generate Domain"**.
    * Вы получите ссылку, например: `https://backend-production.up.railway.app`.

2. **В Vercel:**
    * Зайдите в настройки вашего Frontend проекта -> **Settings** -> **Environment Variables**.
    * Добавьте переменную (назовите её, как она используется в вашем коде, например `VITE_API_URL`).
    * Значение: `https://backend-production.up.railway.app` (ссылка из Railway).
    * **Важно:** После добавления переменной в Vercel нужно сделать **Redeploy** (перезапуск), чтобы изменения вступили в силу.

---

## Итог

Теперь у вас полноценная архитектура:

1. Пользователь заходит на сайт Vercel (`.vercel.app`).
2. Сайт делает запросы (fetch) на сервер Railway (`.railway.app`).
3. Сервер сохраняет данные в PostgreSQL (внутри Railway).

Все работает быстро, надежно и бесплатно (на стартовых тарифах).
